{"version":3,"sources":["../../../src/stores/order.js"],"names":[],"mappings":";;;;AAIA;;;;;;;;;;;;;AAMA;;;;;;IAOa,U,WAAA,U;AAET,wBAAa,UAAb,EAAyB,MAAzB,EAAiC;AAAA;;AAE7B,aAAK,WAAL,GAAmB,UAAnB;AACA,aAAK,OAAL,GAAe,MAAf;AAEH;;;;gCAEO,c,EAAgB;AACpB,iBAAK,OAAL,CAAa,IAAb,CAAkB,2CAA2C,cAA7D;AACA,mBAAO,KAAK,WAAL,CAAiB,OAAjB,CAAyB,EAAC,sBAAuB,cAAxB,EAAzB,CAAP;AACH;;;4BAEI,O,EAAS;;AAEV,gBAAI,QAAQ,WAAR,CAAoB,MAApB,KAA+B,CAAnC,EAAsC;;AAElC,qBAAK,OAAL,CAAa,IAAb,CAAkB,4BAAlB;AACA,qBAAK,OAAL,CAAa,IAAb,CAAkB,2BAA2B,KAAK,SAAL,CAAe,OAAf,CAA7C;AACA,uBAAO,KAAK,WAAL,CAAiB,IAAjB,GACF,KADE,CACI,cADJ,EACoB,EADpB,CACuB,QAAQ,IAAR,GAAe,gBADtC,EACwD,EADxD,CAC2D,QAAQ,EAAR,GAAa,gBADxE,CAAP;AAGH,aAPD,MAOO;;AAEH,qBAAK,OAAL,CAAa,IAAb,CAAkB,8CAAlB;AACA,qBAAK,OAAL,CAAa,IAAb,CAAkB,4BAA4B,KAAK,SAAL,CAAe,OAAf,CAA9C;AACA,uBAAO,KAAK,WAAL,CAAiB,IAAjB,GACF,KADE,CACI,cADJ,EACoB,EADpB,CACuB,QAAQ,IAAR,GAAe,gBADtC,EACwD,EADxD,CAC2D,QAAQ,EAAR,GAAa,gBADxE,EAEF,KAFE,CAEI,aAFJ,EAEmB,EAFnB,CAEsB,QAAQ,WAF9B,CAAP;AAGH;AAEJ","file":"order.js","sourcesContent":["/**\n * order store\n */\n\n\"use strict\";\n\n/* Node modules */\n\n\n/* Third-party modules */\nimport {_} from \"lodash\";\n\n\n/* Files */\n\n\n\nexport class OrderStore {\n\n    constructor (orderModel, logger) {\n\n        this._orderModel = orderModel;\n        this._logger = logger;\n\n    }\n\n    getById(orderReference) {\n        this._logger.info(\"Searching order using order reference \" + orderReference);\n        return this._orderModel.findOne({merlinOrderReference : orderReference});\n    }\n\n    get (filters) {\n\n        if (filters.paymentType.length === 0) {\n\n            this._logger.info(\"Searching only using dates\");\n            this._logger.info(\"Searching using filers\" + JSON.stringify(filters));\n            return this._orderModel.find()\n                .where(\"creationDate\").gt(filters.from + \"T00:00:01.572Z\").lt(filters.to + \"T23:59:59.572Z\");\n\n        } else {\n\n            this._logger.info(\"Searching using filter with date and payment\");\n            this._logger.info(\"Searching using filters\" + JSON.stringify(filters));\n            return this._orderModel.find()\n                .where(\"creationDate\").gt(filters.from + \"T00:00:01.572Z\").lt(filters.to + \"T23:59:59.572Z\")\n                .where(\"orderStatus\").in(filters.paymentType);\n        }\n\n    }\n}\n"]}